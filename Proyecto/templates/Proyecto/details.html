{% extends 'General/dashboard.html' %}
{% load static %}

{% block title %} Proyecto N° {{proyecto.SK_PROYECTO}} {% endblock %}

{% block main %}
<div class="header">
    <h1 class="header-title">
        Detalle del Proyecto.
    </h1>
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'Proyecto' %}">Administración de Proyecto</a></li>
            <li class="breadcrumb-item active" aria-current="page">Detalle</li>
        </ol>
    </nav>
</div>
<div class="row">
    <div class="col-12 col-lg-6">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title mb-0">Información general.</h4>
            </div>
            <div class="card-body">
                <table class="table table-sm my-2">
                    <tbody>
                        <tr>
                            <th>Nombre del cliente:</th>
                            <td>{{proyecto.FK_CLIENTE}}</td>
                        </tr>
                        <tr>
                            <th>Descripción:</th>
                            <td>{{proyecto.ST_DESCRIPCION_PROYECTO}}</td>
                        </tr>
                        <tr>
                            <th>Dirección:</th>
                            <td>{{proyecto.ST_DIRECCION_PROYECTO}}</td>
                        </tr>
                        <tr>
                            <th>Estado actual:</th>
                            <td>{{proyecto.FK_ESTADO_PROYECTO}}</td>
                          
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="col-12 col-lg-6">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title mb-0">Información específica.</h4>
            </div>
            <div class="card-body">
                {% include 'Proyecto/details_especificaciones.html' %}
            </div>
        </div>
    </div>
    <div class="col-12">
        <div class="tab">
            <ul class="nav nav-tabs" role="tablist">
                {% if equipos %}
                    <li class="nav-item"><a class="nav-link active" href="#tab-equipo" data-bs-toggle="tab" role="tab">Equipo</a></li>
                {% endif %}
                {% if personal %}
                    <li class="nav-item"><a class="nav-link" href="#tab-empleado" data-bs-toggle="tab" role="tab">Empleado</a></li>
                {% endif %}
                {% if materiales %}
                    <li class="nav-item"><a class="nav-link" href="#tab-material" data-bs-toggle="tab" role="tab">Material</a></li>
                {% endif %}
            </ul>
            <div class="tab-content">
                {% if equipos %}
                    <div class="tab-pane active" id="tab-equipo" role="tabpanel">
                        <h4 class="tab-title">Equipos asignados</h4>
                    
                        <ol class="list-group list-group-numbered">
                            {% for equipo in equipos %}
                            <li class="list-group-item">
                                {{equipo.FK_EQUIPO__ST_NOMBRE_EQUIPO}}
                            </li>
                            {% endfor %}
                          </ol>
                    </div>
                {% endif %}
                {% if personal %}
                    <div class="tab-pane" id="tab-empleado" role="tabpanel">
                        <h4 class="tab-title">Empleados asignados</h4>
                        <ol class="list-group list-group-numbered">
                            {% for persona in personal %}
                            <li class="list-group-item">
                                {{persona.FK_USUARIO__first_name}} {{FK_USUARIO__last_name}}
                            </li>
                            {% endfor %}
                        </ol>
                    </div>
                {% endif %}
                {% if materiales %}
                    <div class="tab-pane" id="tab-material" role="tabpanel">
                        <h4 class="tab-title">Materiales asignados</h4>
                        <ol class="list-group list-group-numbered">
                            {% for material in materiales %}
                            <li class="list-group-item d-flex justify-content-between align-items-start">
                                <div class="ms-2 me-auto">
                                    <div class="fw-bold">{{material.SK_MATERIAL__ST_NOMBRE_MATERIAL}}</div>
                                  </div>
                                <span class="badge bg-primary rounded-pill">Cantidad:  {{material.ST_DESCRIPCION}}</span>
                            </li>
                            {% endfor %}
                        </ol>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}